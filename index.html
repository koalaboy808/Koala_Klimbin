<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title> Koala DOE </title>
		<script type="text/javascript" src="d3.v3.js"> </script>
		<script src="http://code.jquery.com/jquery.js"></script>
		<script src="js/bootstrap.js"></script>
		<link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
		<style type = "text/css">
			.axis path,
			.axis line {
				fill:none;
				stroke: black;
				shape-rendering: crispEdges;
			}
			.axis text {
				font-family:sans-serif;
				font-size: 11px;
			}
			div.tooltip {
				position: absolute;
				text-align: center;
				width: 60px;
				height: 28px;
				padding: 2px;
				font: 12px sans-serif;
				background: lightsteelblue;
				border: 0px;
				border-radius: 8px;
				pointer-events: none;
			}
		</style>
			
	</head>
	
	<body>
			<div class="container">			
				<div class="col-xs-12 text-center" >
					<div class="jumbotron">
			        	<h1>Hawaii Department of Education</h1>
			        	<p>We are the koala people</p>
			        </div>
				</div>
			</div>	
					
				
				<div class="container">
						<div class="col-xs-1 text-center" >
							<img src="koalablack.png" 
						   	class="img-rounded">
						</div>
						<div class="col-xs-1 text-center" >
								<img src="purplekoala.png" 
							   	class="img-rounded">
						</div>
						<div class="col-xs-1 text-center" >
							<img src="koalablack.png" 
						   	class="img-rounded">
						</div>
						<div class="col-xs-1 text-center" >
								<img src="purplekoala.png" 
							   	class="img-rounded">
						</div>
						<div class="col-xs-1 text-center" >
							<img src="koalablack.png" 
						   	class="img-rounded">
						</div>
						<div class="col-xs-1 text-center" >
								<img src="purplekoala.png" 
							   	class="img-rounded">
						</div>
						<div class="col-xs-1 text-center" >
							<img src="koalablack.png" 
						   	class="img-rounded">
						</div>
						<div class="col-xs-1 text-center" >
								<img src="purplekoala.png" 
							   	class="img-rounded">
						</div>
						<div class="col-xs-1 text-center" >
							<img src="koalablack.png" 
						   	class="img-rounded">
						</div>
						<div class="col-xs-1 text-center" >
								<img src="purplekoala.png" 
							   	class="img-rounded">
						</div>
						<div class="col-xs-1 text-center" >
							<img src="koalablack.png" 
						   	class="img-rounded">
						</div>
						<div class="col-xs-1 text-center" >
								<img src="purplekoala.png" 
							   	class="img-rounded">
						</div>
				</div>	
			
			</br></br>
			
			<!-- START THE FEATURETTES -->
		<div class="container">
			<div class="container marketing">
				
			      <hr class="featurette-divider">
				  <hr class="featurette-divider">

			      <div class="row featurette">
			        <div class="col-md-7">
			          <h2 class="featurette-heading">SGP vs Tripod. <p><span class="text-muted">Studeng Growth 							Percentile measures growth over time.</span></p>
					  </h2>
			          <p class="lead">Donec ullamcorper nulla non metus auctor fringilla. Vestibulum id ligula porta 									felis euismod semper. Praesent commodo cursus magna, vel scelerisque nisl consectetur. 									  Fusce dapibus, tellus ac cursus commodo.</p>
			        </div>
			        <div class="col-md-5">
			          <a href="#" data-toggle="modal" data-target="#myModal">
			          	<img src="tripod.button.png">
			          </a>
			        </div>
			      </div>

			      <hr class="featurette-divider">
				  <hr class="featurette-divider">
				  
			      <div class="row featurette">
			        <div class="col-md-5">
			          <a href="#" class="btn btn-lg btn-succes" data-toggle="modal" data-target="#myModal2">
			          	<img src="scale.button.png">
			          </a>
			        </div>
			        <div class="col-md-7">
			          <h2 class="featurette-heading">SGP vs Scale Score. <p><span class="text-muted">What do you expect 							will happen?</span></p>
					  </h2>
			          <p class="lead">Donec ullamcorper nulla non metus auctor fringilla. Vestibulum id ligula porta 									felis euismod semper. Praesent commodo cursus magna, vel scelerisque nisl consectetur. 									  Fusce dapibus, tellus ac cursus commodo.</p>
			        </div>
			      </div>

			      <hr class="featurette-divider">
			</div>
		</div>	
			
			<!-- END THE FEATURETTES -->
		
			<!-- Modal -->
			<div class="modal fade" id="myModal2" tabindex="-1" role="dialog" aria-labelledby="myModal2" 				aria-hidden="true">
			   <div class="modal-dialog">
			      <div class="modal-content">
			         <div class="modal-header">
			            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
			                  &times;
			            </button>
			            <h4 class="modal-title" id="myModalLabel">
			               Student Growth Percentile versus Tripod Score
			            </h4>
						<br>
						<div id="option">
							<input name="updateButton" type="button" value="Animate" onclick="updateData()"/>
							<input name="revertButton" type="button" value="Reset" onclick="revertData()" />
						</div>
			         </div>
			         <div class="modal-body" id = "area2"></div>
			         <div class="modal-footer">
			            <button type="button" class="btn btn-default" data-dismiss="modal">
						   Close
			            </button>
			         </div>
			      </div><!-- /.modal-content -->
				</div><!-- /.modal dialog -->
			</div><!--/.modal fade-->
			
			<!-- Modal -->
			<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModal" 					aria-hidden="true">
			   <div class="modal-dialog">
			      <div class="modal-content">
			         <div class="modal-header">
			            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
			                  &times;
			            </button>
			            <h4 class="modal-title" id="myModalLabel">
			               Student Growth Percentile versus Tripod Score
			            </h4>
						
			         </div>
			         <div class="modal-body" id = "area1"></div>
			         <div class="modal-footer">
			            <button type="button" class="btn btn-default" data-dismiss="modal"> 
							Close 
						</button>
			         </div>
			      </div><!-- /.modal-content -->
				</div><!-- /.modal dialog -->
			</div><!-- /.modal fade -->
			
			
		
			<body>
				<script type="text/javascript">
		
				//var dataset = [];
				var w = 600;
				var h = 400;
				var padding = 50;
		
				var svg1 = d3.select("#area1")
							.append("svg")
							.attr("width",w)
							.attr("height",h);
		
				var svg2 = d3.select("#area2")
							.append("svg")
							.attr("width",w)
							.attr("height",h);
					
		
				d3.csv("msgp.tripd.csv", function(data) {
				dataset = data;
		
				 data.forEach(function(d) {
					d.individ_msgp = +d.individ_msgp;
					d.sevencs_nce_median = +d.sevencs_nce_median
					d.individ_tripod_rating = +d.individ_tripod_rating
					d.individ_sgp_rating = +d.individ_sgp_rating;
				});
		
				var xScale = d3.scale.linear()
										 .domain([0, d3.max(dataset, function(d) { return d.individ_msgp; })])
										 .range([padding, w-padding]);

				var yScale = d3.scale.linear()
										 .domain([0, d3.max(dataset, function(d) { return d.sevencs_nce_median; })])
										 .range([h-padding, padding]);
								 
				//Create x and y axis
				function animateFirstStep(){
						    d3.select(this)
						      .transition()            
						        .delay(0)            
						        .duration(1000)
						        .attr("r", 30)
								//.style("opacity",10)
								.style("stroke","black")
						        .each("end", animateSecondStep);
						};
		
						function animateSecondStep(){
						    d3.select(this)
						      .transition()
						        .duration(1000)
								.style("stroke",null)
						        .attr("r", 3);
						};
				
				var xAxis = d3.svg.axis()
								.scale(xScale)
								.orient("bottom");
				var yAxis = d3.svg.axis()
								.scale(yScale)
								.orient("left");
				
							
				svg1.selectAll("circle")
					.data(dataset)
					.enter()
					.append("circle")
					.attr("cx", function(d) {
					   		return xScale(d.individ_msgp);
					   })
					.attr("cy", function(d) {
					   		return yScale(d.sevencs_nce_median);
					   })
					.attr("r",3)
					//.attr("fill", "rgba(0, 0, 0, 0.5)")
					.attr('fill', function(d) {
		  			if ((d.individ_sgp_rating == 4) && (d.individ_tripod_rating == d.individ_sgp_rating)) { // 0.25 is a percentage value representing the data
		    			return 'rgb(147,222,127)';
		  			}
		  			else if ((d.individ_sgp_rating == 3) && (d.individ_tripod_rating == d.individ_sgp_rating)) {
		    			return 'rgb(123,186,222)';
		  			}
		  			else if ((d.individ_sgp_rating == 2) && (d.individ_tripod_rating == d.individ_sgp_rating)){
		    			return 'rgb(242,158,74)';
		  			}
		  			else if ((d.individ_sgp_rating == 1)&& (d.individ_tripod_rating == d.individ_sgp_rating)) {
		    			return 'rgb(255,112,80)';
		  			}
		  			else if ((d.individ_sgp_rating-d.individ_tripod_rating==1) || 								(d.individ_sgp_rating-d.individ_tripod_rating==-1)) {
		  				return 'grey';
		  			}
		  			else {
		  				return 'black';
		  			}
					})
					.attr("opacity", "0.7")
					.on("mouseover",function(d){
									div.transition()
									.duration(200)
									.style("opacity",.9);
									//.text("MSGP: " + Math.round(d.individ_msgp) + " , Tripod: " + d.sevencs_nce_median)
									div.html("MSGP: " + Math.round(d.individ_msgp) + "</br>" +"Tripod: " + 											d.sevencs_nce_median)
									.style("left",(d3.event.pageX)+"px")
									.style("top",(d3.event.pageY)+"px");
								})
								.on("mouseout",function(d){
									div.transition()
									.duration(500)
									.style("opacity",0);
								})
								.on("mouseover", animateFirstStep);
					//.filter(function(d) { return d == null; }).remove();
		
				//Call X axis
					svg1.append("g")
						.attr("class", "axis")
						.attr("transform","translate(0,"+ (h-padding) +")")
						.call(xAxis);
				//Call Y axis
					svg1.append("g")
						.attr("class","axis")
						.attr("transform","translate("+ padding +",0)")
						.call(yAxis);				
				});
				
				
			
							var dataset2 = [
				                  [ 20,     500 ],
				                  [ 50,   250 ],
				                  [ 73,   100 ],
				                  [ 90,   330 ],
				                  [ 12,   410 ],
				                  [ 44,   475 ],
				                  [ 67,    25 ],
				                  [ 21,    87 ],
				                  [ 98,   220 ]
				              ];
              
				              
              
				              var rScale = d3.scale.linear()
				              			.domain([0,d3.max(dataset2, function(d) {
				              				return d[1];
				              			})])
				              			.range([2,5]);
              
				              var xScale = d3.scale.linear()
				                     .domain([0, d3.max(dataset2, function(d) { 
				                     	return d[0]; 
				                     	})])
				                     .range([padding, w-padding*3]);
              
				              var yScale = d3.scale.linear()
				                     .domain([0, d3.max(dataset2, function(d) { 
				                     	return d[1]; 
				                     	})])
				                     .range([h-padding, padding]);
              				
 		   						/*svg2.selectAll("text")
 		   				              		.data(dataset2)
 		   				              		.enter()
 		   				              		.append("text")
 		   				              	.text(function(d) {
 		   				              			return "Scale Score:" + d[1];
 		   				              		})
 		   				              		.attr("x", 1+padding)
 		   				              		.attr("y", function(d) {
 		   				              			return yScale(d[1] + 1);
 		   				              		})
 		   				              		.attr("font-family", "arial")
 		   				              		.attr("font-size", "11px")
 		   				              		.attr("fill","green");*/
										
    	   		   				svg2.selectAll("circle")
    	   		   	              			.data(dataset2)
    	   			              			.enter()
   	   				              			.append("circle")
    	   		   							.attr("r", "3")
    	   		   					 		.attr("cy", function(d) {
    	   										return yScale(d[1]);
    	   		   				   			})
    	   		   				  			.attr("cx", 0+padding)
    	   		   				  			.style("fill", "green");	  	
											
	   									 function updateData() {
											 
				 							var dataset2 = [
				 				                  [ 20,     500 ],
				 				                  [ 50,   250 ],
				 				                  [ 73,   100 ],
				 				                  [ 90,   330 ],
				 				                  [ 12,   410 ],
				 				                  [ 44,   475 ],
				 				                  [ 67,    25 ],
				 				                  [ 21,    87 ],
				 				                  [ 98,   220 ]
				 				              ];
              
				              
              
				 				              var rScale = d3.scale.linear()
				 				              			.domain([0,d3.max(dataset2, function(d) {
				 				              				return d[1];
				 				              			})])
				 				              			.range([5,5]);
              
				 				              var xScale = d3.scale.linear()
				 				                     .domain([0, d3.max(dataset2, function(d) { 
				 				                     	return d[0]; 
				 				                     	})])
				 				                     .range([padding, w-padding*3]);
              
				 				             var yScale = d3.scale.linear()
				 				                     .domain([0, d3.max(dataset2, function(d) { 
				 				                     	return d[1]; 
				 				                     	})])
				 				                     .range([h-padding, padding]);
													 
	   		   							  svg2.selectAll("circle")			
	   		   				  					.transition()
	   		   				    						.delay(10)
	   		   				   							.duration(3000)
	   		   				  							.attr("cx", function(d) {
	   		   				              					return xScale(d[0]);
	   		   				              				})
	   		   				              				.attr("cy", function(d) {
	   		   				              					return yScale(d[1]);
	   		   				              				})
	   		   				              				.attr("r", function(d) {
	   		   				              					return rScale(d[1]+5);
	   		   				              				});
	   											}
												
														
	   	   									 function revertData() {
											 
	   				 							var dataset2 = [
	   				 				                  [ 20,     500 ],
	   				 				                  [ 50,   250 ],
	   				 				                  [ 73,   100 ],
	   				 				                  [ 90,   330 ],
	   				 				                  [ 12,   410 ],
	   				 				                  [ 44,   475 ],
	   				 				                  [ 67,    25 ],
	   				 				                  [ 21,    87 ],
	   				 				                  [ 98,   220 ]
	   				 				              ];
              
				              
              
	   				 				              var rScale = d3.scale.linear()
	   				 				              			.domain([0,d3.max(dataset2, function(d) {
	   				 				              				return d[1];
	   				 				              			})])
	   				 				              			.range([2,5]);
              
	   				 				              var xScale = d3.scale.linear()
	   				 				                     .domain([0, d3.max(dataset2, function(d) { 
	   				 				                     	return d[0]; 
	   				 				                     	})])
	   				 				                     .range([padding, w-padding]);
              
	   				 				             var yScale = d3.scale.linear()
	   				 				                     .domain([0, d3.max(dataset2, function(d) { 
	   				 				                     	return d[1]; 
	   				 				                     	})])
	   				 				                     .range([h-padding, padding]);
													 
	   	   		   							  svg2.selectAll("circle")			
	   	   		   				  					.transition()
	   	   		   				    						.delay(10)
	   	   		   				   							.duration(3000)
				    	   		   							.attr("r", "3")
				    	   		   					 		.attr("cy", function(d) {
				    	   										return yScale(d[1]);
				    	   		   				   			})
				    	   		   				  			.attr("cx", 0+padding)
				    	   		   				  			.style("fill", "green")			
	   	   											}
												
												
									
              		
				            	var xAxis = d3.svg.axis()
				                  .scale(xScale)
				                  .orient("bottom")
				                  .ticks(5);
                  
				                var yAxis = d3.svg.axis()
				                  .scale(yScale)
				                  .orient("left")
				                  .ticks(5);
                  
				                svg2.append("g")
				                	.attr("class", "axis")
				                	.attr("transform", "translate(0," + (h - padding) + ")")
				    				.call(xAxis);
								
								svg2.append("text") // text label for the x axis
									.attr("x", (w-padding)/2 )
									.attr("y", h )
									.style("text-anchor", "middle")
									.text("Student Growth Percentile");
    				
    				
				    			svg2.append("g")
				    				.attr("class", "axis")
				   					.attr("transform", "translate(" + padding + ",0)")
				    				.call(yAxis);
								
								svg2.append("text") // text label for the y axis
									.attr("x", 0 - h/2 )
									.attr("y", 0+10)
									.attr("transform", "rotate(-90)")
									.style("text-anchor", "middle")
									.text("HSA Proficiency");	
												

				</script>
			</body>
		</html>